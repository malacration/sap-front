<div class="container-fluid">
  <!-- === 1) Campos de filtro (busca de parceiro + busca de item) === -->
  <div class="row mb-2">
    <div class="col-sm-6">
      <label class="form-label">Parceiro (Business Partner)</label>
      <app-busines-partner-search
        (selected)="onPartnerSelected($event)"
      ></app-busines-partner-search>
    </div>
    <div class="col-sm-6">
      <label class="form-label">Item</label>
      <app-item-search (selected)="onItemSelected($event)"></app-item-search>
    </div>
  </div>

  <!-- === 2) Mensagens de carregamento / “nenhum pedido” === -->
  <div *ngIf="carregando" class="text-center py-4">Carregando...</div>
  <div
    *ngIf="!carregando && filteredPedidos.length === 0"
    class="alert alert-warning"
  >
    Nenhum pedido encontrado.
  </div>

  <!-- === 3) Tabela de resultados filtrados e paginados === -->
  <div class="row" *ngIf="!carregando && filteredPedidos.length > 0">
    <div class="col-12">
      <table class="table table-bordered table-sm">
        <thead class="thead-light">
          <tr>
            <th>DATA</th>
            <th>FILIAL</th>
            <th>CLIENTE</th>
            <th>VENDEDOR</th>
            <th>PRODUTO</th>
            <th>FRETE</th>
            <th>IMEDIATA</th>
            <th>SEM PREVISÃO</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let pedido of pagedPedidos">
            <td>{{ pedido.DocDate }}</td>
            <td>{{ pedido.CardName }}</td>
            <td>{{ pedido.CardName }}</td>
            <td>{{ pedido.SlpName }}</td>
            <td>{{ pedido.ItemCode }} - {{ pedido.Dscription }}</td>
            <td>{{ pedido.DistribSum | number : "1.2-2" }}</td>
            <td>
              {{
                pedido.Usage === 9
                  ? (pedido.DistribSum | number : "1.2-2")
                  : "-"
              }}
            </td>
            <td>
              {{
                pedido.Usage === 16
                  ? (pedido.DistribSum | number : "1.2-2")
                  : "-"
              }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- === 4) Paginação no rodapé === -->
  <div class="row mt-3" *ngIf="!carregando && filteredPedidos.length > 0">
    <div class="col-12 text-center">
      <app-paginacao
        [totalItens]="filteredPedidos.length"
        [pageSize]="pageSize"
        [currentPage]="currentPage"
        (pageChange)="onPageChange($event)"
      ></app-paginacao>
    </div>
  </div>
</div>
